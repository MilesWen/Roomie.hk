{% extends 'bulletin/base.html' %} <!-- using the base.html interface -->

{% load staticfiles %}

{% block title %} Listing pages {% endblock %}

{% block body_id %}roomie-listing-page{% endblock %}

{% block body_block %}
	<!-- Hamburger -->
    <nav id="menu" class="menu">
      <a href="" target="_blank">
        <header class="menu-header">
          <span class="menu-header-title">#</span>
        </header>
      </a>
      <!-- Menu area -->
      <section class="menu-section">
        <ul class="menu-section-list">
          <li><a href="/bulletin/profile/{{ seeker.id }}/">Profile</a></li>
          <li><a href="" target="_blank">Search</a></li>
          <li><a href="" target="_blank">Add my place</a></li>
        </ul>
      </section>
      <section class="menu-section">
        <ul class="menu-section-list">
          <li><a href="" target="_blank">Message</a></li>
          <li><a href="" target="_blank">Bookmarks</a></li>
        </ul>
      </section>
      <section class="menu-section">
        <ul class="menu-section-list">
          <li><a href="" target="_blank">Logout</a></li>
        </ul>
      </section>
      <!-- end of Menu area -->
    </nav>
    <!-- end of Hamburger -->

    <div id="panel" class="panel purple-bg app-container"><!-- App body -->
      <header class="panel-header">
        <div class="row">
        	<div class='col-xs-2'>
		        <button class="btn-hamburger js-slideout-toggle" style='padding:2.5em;'></button>
	        </div>
	        <div class='col-xs-10'>
		        <!-- <div class='roomie-dummy-search left'>Search</div> -->
		        <div class="input-group roomie-dummy-search left">
						  <span class='icon-home-search'></span>
						  <i>Current location</i>
						</div>
	        </div>
        </div>
      </header>
      <div class='app-content'><!-- App content -->
      	
      	<!-- carousel view here -->
        <div class='carousel-cards-area'><!-- Detail: images -->
          <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
            <!-- Wrapper for slides -->
            <div class="carousel-inner">
              {% for room in roomList %}
            	   {% include 'bulletin/__cards__.html' %}
              {% endfor %}
            </div>
          </div>
        </div>

    		<!-- end of carousel view here -->

    		<div class='listing-card-actions'>
    			<div class="row">
	        	<div class='col-xs-2'></div>
	        	<div class='col-xs-4 center-align'>
	        		<a href='' class='btn-round btn-bookmark'>
	        		</a>
	        	</div>
	        	<div class='col-xs-4 center-align'>
	        		<a href='' class='btn-round btn-message'>
	        		</a>
	        	</div>
	        	<div class='col-xs-2'></div>
	        </div>
    		</div>

      </div><!-- end of App content -->
    </div><!-- end of App body -->

    <!-- Hambuger menu script -->
    <script>
      window.onload = function() {
        document.querySelector('.js-slideout-toggle').addEventListener('click', function() {
          slideout.toggle()
        })

        document.querySelector('.menu').addEventListener('click', function(eve) {
          if (eve.target.nodeName === 'A') { slideout.close() }
        })
      }
    </script>
    <!-- end of Hamburger menu script -->
    <!-- Google maps in listing card -->
    <script>
      var map
        , icon = {
            url: "{% static 'bulletin/assets/map-pin.png' %}"
          , size: new google.maps.Size(50, 50)
          , origin: new google.maps.Point(0,0)
          , anchor: new google.maps.Point(25, 25)
        }
        , latlng = new google.maps.LatLng(22.306011, 114.1879995)
        , marker

      var map1
        , icon = {
            url: "{% static 'bulletin/assets/map-pin.png' %}"
          , size: new google.maps.Size(50, 50)
          , origin: new google.maps.Point(0,0)
          , anchor: new google.maps.Point(25, 25)
        }
        , latlng = new google.maps.LatLng(22.306011, 114.1879995)
        , marker

      var maps = []
      var markers = []

      function initialize(count) {
      //    map = new google.maps.Map(document.getElementById('map-canvas-'.concat({{forloop.counter}})), {
          var map_id = 'map-canvas-' + count
          console.log(count, map_id)
          console.log($('#'+map_id))
          maps[count] = new google.maps.Map(document.getElementById('map-canvas'), {
              zoom: 16
            , center: {lat: 22.306011, lng: 114.1879995}
            , disableDefaultUI: true
          })

          markers[count] = new google.maps.Marker({
              position: latlng
            , map: maps[count]
            , icon: icon
            , animation: google.maps.Animation.DROP,
          })

          console.log(maps[count])
      }
      for (var count = 1; count < 3; count++)
        google.maps.event.addDomListener(window, 'load', initialize(count))
        //initialize({{forloop.counter}})
      
    </script>
		<!-- end of Google maps in listing card -->
{% endblock %}

<!-- Delete the following codes in production mode! -->

{% if seeker %}
  <ul>
      <li>Seeker id: {{seeker.id}}</li>
      <li>Seeker name: {{seeker.name}}</li>
      <li>Seeker gender: {{seeker.gender}}</li>
      <li>Seeker's roommate gender preference: {{seeker.gender_mate}}</li>
      <li>Seeker's district preference: {{seeker.district}}</li>
      <li>Seeker's isPrivate preference: {{seeker.isPrivate}}</li>
      <li>Seeker's price gender preference: {{seeker.price}}</li>
      
  </ul>

  {% if roomList %}
    <ul>
        {% for room in roomList %}
          <li>Room:   {{ room.id }}</li>
          <li>Owner:   {{ room.user }}</li>
          <li>Owner gender:   {{ room.user.gender }}</li>
          <li>Room district:   {{ room.district }}</li>
          <li>Room isPrivate:   {{ room.isPrivate }}</li>
          <li>Room price:   {{ room.price }}</li>
        {% endfor %}
    </ul>
  
  {% else %}
      The specified roomList  does not exist!
  {% endif %}

{% else %}
    The specified seeker does not exist!
{% endif %}

{% block custome_js_block %}
  <!-- Carousel of images -->
  <script>
    $("#carousel-example-generic").carousel({
      swipe: 50 // percent-per-second, default is 50. Pass false to disable swipe
    }) 
  </script><!-- end of Carousel of images -->
{% endblock %}